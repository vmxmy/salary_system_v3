# 开发计划 - Phase 2-5 详细规划

## 总体时间安排
- **Phase 2**: 通用组件（10天）- 2024.01.25 - 2024.02.07
- **Phase 3**: 核心模块（15天）- 2024.02.08 - 2024.02.28
- **Phase 4**: 业务模块（10天）- 2024.02.29 - 2024.03.11
- **Phase 5**: 优化完善（3天）- 2024.03.12 - 2024.03.14

---

## Phase 2: 通用组件（10天）

### 2.1 DataTable 组件（3天）
**目标**: 创建功能完整的数据表格组件，支持排序、筛选、分页、列配置等功能

#### Day 1: 基础结构
- [ ] 创建 DataTable 基础组件结构
- [ ] 实现基本的表格渲染
- [ ] 集成 TanStack Table
- [ ] 实现响应式设计

#### Day 2: 核心功能
- [ ] 实现排序功能
- [ ] 实现分页功能
- [ ] 实现列显示/隐藏
- [ ] 实现行选择功能

#### Day 3: 高级功能
- [ ] 实现筛选功能
- [ ] 实现导出功能（Excel/CSV）
- [ ] 实现列宽调整
- [ ] 创建使用文档和示例

**文件结构**:
```
src/components/common/DataTable/
├── index.tsx
├── DataTable.tsx
├── DataTablePagination.tsx
├── DataTableToolbar.tsx
├── DataTableColumnHeader.tsx
├── DataTableRowActions.tsx
├── hooks/
│   ├── useDataTable.ts
│   └── useTableState.ts
└── types.ts
```

### 2.2 TreeManager 组件（2天）
**目标**: 创建树形结构管理组件，用于部门、组织架构等层级数据

#### Day 4: 基础功能
- [ ] 创建 TreeManager 基础组件
- [ ] 实现树形数据渲染
- [ ] 实现节点展开/折叠
- [ ] 实现节点选择

#### Day 5: 交互功能
- [ ] 实现拖拽排序
- [ ] 实现节点增删改
- [ ] 实现搜索功能
- [ ] 实现右键菜单

**文件结构**:
```
src/components/common/TreeManager/
├── index.tsx
├── TreeManager.tsx
├── TreeNode.tsx
├── TreeNodeActions.tsx
├── hooks/
│   └── useTreeData.ts
└── types.ts
```

### 2.3 TimelineManager 组件（2天）
**目标**: 创建时间线组件，用于显示员工履历、薪资变动等时序数据

#### Day 6: 基础实现
- [ ] 创建 TimelineManager 组件
- [ ] 实现垂直/水平布局
- [ ] 实现时间节点渲染
- [ ] 实现自定义内容插槽

#### Day 7: 交互优化
- [ ] 实现时间筛选
- [ ] 实现节点详情展示
- [ ] 实现动画效果
- [ ] 创建不同样式主题

### 2.4 FormBuilder 组件（2天）
**目标**: 创建动态表单构建器，支持配置化表单生成

#### Day 8: 表单基础
- [ ] 创建 FormBuilder 组件
- [ ] 实现字段类型系统
- [ ] 实现表单验证
- [ ] 实现表单布局

#### Day 9: 高级特性
- [ ] 实现条件显示逻辑
- [ ] 实现字段联动
- [ ] 实现自定义字段组件
- [ ] 实现表单模板

### 2.5 其他通用组件（1天）
#### Day 10: 辅助组件
- [ ] SearchFilter - 高级搜索组件
- [ ] ImportExport - 导入导出组件
- [ ] FileUploader - 文件上传组件
- [ ] DateRangePicker - 日期范围选择器
- [ ] StatCard - 统计卡片组件

---

## Phase 3: 核心模块（15天）

### 3.1 员工管理模块（6天）

#### Day 1-2: 员工列表页
- [ ] 创建员工列表页面
- [ ] 集成 DataTable 组件
- [ ] 实现搜索和筛选
- [ ] 实现批量操作
- [ ] 实现导入导出

#### Day 3-4: 员工详情页
- [ ] 创建员工详情页面
- [ ] 实现基本信息展示
- [ ] 实现信息编辑功能
- [ ] 实现履历时间线
- [ ] 实现文档管理

#### Day 5-6: 员工表单
- [ ] 创建员工新增/编辑表单
- [ ] 实现多步骤表单
- [ ] 实现表单验证
- [ ] 实现照片上传
- [ ] 实现数据联动

**页面结构**:
```
src/pages/employee/
├── EmployeeListPage.tsx
├── EmployeeDetailPage.tsx
├── EmployeeFormPage.tsx
├── components/
│   ├── EmployeeTable.tsx
│   ├── EmployeeForm/
│   ├── EmployeeTimeline.tsx
│   └── EmployeeDocuments.tsx
└── hooks/
    ├── useEmployees.ts
    └── useEmployeeForm.ts
```

### 3.2 组织架构模块（4天）

#### Day 7-8: 部门管理
- [ ] 创建部门管理页面
- [ ] 集成 TreeManager 组件
- [ ] 实现部门增删改
- [ ] 实现部门调整
- [ ] 实现部门人员管理

#### Day 9-10: 职位管理
- [ ] 创建职位管理页面
- [ ] 实现职位体系管理
- [ ] 实现职级管理
- [ ] 实现职位权限配置

### 3.3 系统管理模块（5天）

#### Day 11-12: 用户权限管理
- [ ] 创建用户管理页面
- [ ] 实现角色管理
- [ ] 实现权限配置
- [ ] 实现权限分配

#### Day 13-14: 系统配置
- [ ] 创建系统设置页面
- [ ] 实现参数配置
- [ ] 实现数据字典
- [ ] 实现操作日志

#### Day 15: 数据管理
- [ ] 实现数据备份
- [ ] 实现数据导入导出
- [ ] 实现数据同步
- [ ] 实现数据清理

---

## Phase 4: 业务模块（10天）

### 4.1 薪资管理模块（5天）

#### Day 1-2: 薪资配置
- [ ] 创建薪资项目配置
- [ ] 实现薪资公式配置
- [ ] 实现薪资等级管理
- [ ] 实现计算规则配置

#### Day 3-4: 薪资计算
- [ ] 创建薪资计算页面
- [ ] 实现批量计算
- [ ] 实现个人计算
- [ ] 实现计算预览
- [ ] 实现异常处理

#### Day 5: 薪资发放
- [ ] 创建薪资发放页面
- [ ] 实现发放审批
- [ ] 实现工资条生成
- [ ] 实现银行文件导出

### 4.2 社保个税模块（3天）

#### Day 6-7: 社保管理
- [ ] 创建社保配置页面
- [ ] 实现社保基数管理
- [ ] 实现社保计算
- [ ] 实现社保申报

#### Day 8: 个税管理
- [ ] 创建个税配置页面
- [ ] 实现个税计算
- [ ] 实现专项扣除
- [ ] 实现个税申报

### 4.3 报表分析模块（2天）

#### Day 9: 报表中心
- [ ] 创建报表列表页面
- [ ] 实现薪资报表
- [ ] 实现人员报表
- [ ] 实现成本分析报表

#### Day 10: 数据分析
- [ ] 创建数据分析页面
- [ ] 实现图表展示
- [ ] 实现趋势分析
- [ ] 实现数据导出

---

## Phase 5: 优化完善（3天）

### 5.1 性能优化（1天）
#### Day 1: 前端性能
- [ ] 实现路由懒加载优化
- [ ] 实现组件按需加载
- [ ] 优化打包配置
- [ ] 实现缓存策略
- [ ] 优化API请求

### 5.2 用户体验优化（1天）
#### Day 2: UX改进
- [ ] 完善错误处理
- [ ] 添加操作引导
- [ ] 优化加载状态
- [ ] 完善操作反馈
- [ ] 添加快捷键支持

### 5.3 测试与文档（1天）
#### Day 3: 质量保证
- [ ] 编写单元测试
- [ ] 编写集成测试
- [ ] 完善使用文档
- [ ] 创建部署文档
- [ ] 进行全面测试

---

## 技术要点

### 状态管理策略
```typescript
// 全局状态 (Zustand)
- 用户认证状态
- 系统配置
- 通知消息

// 服务端状态 (React Query)
- 员工数据
- 部门数据
- 薪资数据

// 本地状态 (useState/useReducer)
- 表单状态
- UI状态
```

### API 设计规范
```typescript
// RESTful API
GET    /api/v2/employees          // 列表
GET    /api/v2/employees/:id      // 详情
POST   /api/v2/employees          // 创建
PUT    /api/v2/employees/:id      // 更新
DELETE /api/v2/employees/:id      // 删除

// 批量操作
POST   /api/v2/employees/batch    // 批量操作
POST   /api/v2/employees/import   // 导入
GET    /api/v2/employees/export   // 导出
```

### 组件设计原则
1. **单一职责**: 每个组件只负责一个功能
2. **可组合性**: 组件可以灵活组合使用
3. **可配置性**: 通过 props 配置组件行为
4. **可测试性**: 组件逻辑可单独测试

### 代码规范
- 使用 TypeScript 严格模式
- 遵循 ESLint 规则
- 使用 Prettier 格式化
- 编写 JSDoc 注释
- 保持代码 DRY 原则

---

## 风险与应对

### 潜在风险
1. **时间风险**: 功能复杂度超出预期
   - 应对: 及时调整优先级，核心功能优先

2. **技术风险**: 第三方库兼容性问题
   - 应对: 提前调研，准备备选方案

3. **需求风险**: 需求变更频繁
   - 应对: 模块化设计，便于调整

### 质量保证
- 每个模块完成后进行代码审查
- 编写关键功能的单元测试
- 定期进行集成测试
- 保持文档同步更新

---

## 交付标准

### Phase 2 交付物
- [ ] 5个通用组件及其文档
- [ ] 组件 Storybook 演示
- [ ] 组件单元测试

### Phase 3 交付物
- [ ] 员工管理完整功能
- [ ] 组织架构管理功能
- [ ] 系统管理基础功能
- [ ] API 接口文档

### Phase 4 交付物
- [ ] 薪资管理核心功能
- [ ] 社保个税计算功能
- [ ] 基础报表功能
- [ ] 用户操作手册

### Phase 5 交付物
- [ ] 性能测试报告
- [ ] 部署文档
- [ ] 系统管理员手册
- [ ] 源代码及构建产物

---

更新日期：2024-01-24  
版本：1.0