# 动态样式类组合

## 功能概述
利用 Vite 的快速热更新，创建动态的 Tailwind 类组合，实现复杂的视觉效果。通过智能的样式组合系统，让组件能够根据状态、主题、用户交互等条件动态调整样式，提升界面的响应性和交互体验。

## 业务背景
财务系统需要丰富的交互反馈和状态展示，当前存在的问题：
- 样式类硬编码，难以根据条件动态变化
- 状态切换时样式变化生硬，缺乏过渡
- 主题切换时某些样式不能正确适配
- 复杂条件下的样式组合逻辑混乱

## 核心需求

### 1. 条件样式系统

#### 基础条件样式工具
**classNames 工具函数**
- 支持字符串、对象、数组等多种输入格式
- 自动过滤 undefined、null、false 值
- 支持嵌套条件组合
- TypeScript 类型安全

**条件类型**
- **布尔条件**：基于 true/false 的样式切换
- **枚举条件**：基于多个选项的样式映射
- **数值条件**：基于数值范围的样式变化
- **组合条件**：多个条件的逻辑组合

#### 高级条件组合
- **与条件**：所有条件满足时应用样式
- **或条件**：任一条件满足时应用样式
- **非条件**：条件不满足时应用样式
- **嵌套条件**：条件内部包含子条件

### 2. 状态驱动样式

#### 组件状态样式
**交互状态**
- hover：鼠标悬浮
- active：激活/按下
- focus：获得焦点
- disabled：禁用状态
- loading：加载中

**数据状态**
- empty：空数据
- error：错误状态
- success：成功状态
- warning：警告状态
- pending：待处理

**UI 状态**
- expanded：展开状态
- collapsed：收起状态
- selected：选中状态
- highlighted：高亮状态
- dragging：拖拽中

#### 状态转换动画
- 平滑的颜色过渡
- 渐进的大小变化
- 优雅的位置移动
- 自然的透明度变化

### 3. 主题感知样式

#### 主题变量映射
**颜色映射**
- 主题色自动适配
- 语义色智能切换
- 对比度自动调整
- 透明度动态计算

**间距映射**
- 紧凑/宽松模式
- 响应式间距调整
- 组件密度控制

#### 主题组合策略
- 浅色主题样式集
- 深色主题样式集
- 高对比度样式集
- 自定义主题扩展

### 4. 样式组合优化

#### 性能优化
**类名缓存**
- 计算结果缓存
- 避免重复计算
- 内存使用优化

**编译优化**
- Tree-shaking 支持
- 按需加载样式
- 最小化运行时开销

#### 开发体验
**类型提示**
- 自动补全支持
- 错误检查
- 样式预览

**调试工具**
- 样式组合可视化
- 条件路径追踪
- 性能分析

### 5. 实用工具集

#### 样式变体生成器
```typescript
// 自动生成组件的所有样式变体
const variants = createVariants({
  base: 'btn',
  variants: {
    size: {
      sm: 'btn-sm',
      md: 'btn-md',
      lg: 'btn-lg'
    },
    variant: {
      primary: 'btn-primary',
      secondary: 'btn-secondary'
    }
  }
});
```

#### 响应式样式助手
```typescript
// 简化响应式样式的编写
const responsive = createResponsive({
  sm: 'text-sm px-2',
  md: 'text-base px-4',
  lg: 'text-lg px-6'
});
```

#### 动画样式构建器
```typescript
// 创建复杂的动画序列
const animation = createAnimation({
  from: 'opacity-0 scale-95',
  to: 'opacity-100 scale-100',
  duration: 300
});
```

### 6. 集成方案

#### React 集成
- 自定义 Hook 支持
- HOC 包装器
- Context 集成
- Props 映射

#### 组件库集成
- DaisyUI 组件扩展
- 自定义组件适配
- 第三方库兼容

#### 构建工具集成
- Vite 插件开发
- PostCSS 处理
- 开发服务器优化

## 技术实现要点

### 1. 核心架构
```typescript
// 样式组合引擎
class StyleEngine {
  // 条件解析
  // 样式组合
  // 缓存管理
  // 主题适配
}
```

### 2. TypeScript 支持
- 完整的类型定义
- 泛型支持
- 类型推导
- 严格模式兼容

### 3. 性能指标
- 首次渲染 < 1ms
- 样式切换 < 0.1ms
- 内存占用 < 1MB
- 包体积增加 < 5KB

## 验收标准
1. 所有条件样式功能正常工作
2. 状态切换流畅无卡顿
3. 主题适配完美无遗漏
4. 性能指标全部达标
5. 开发体验显著提升
6. 提供完整的使用文档

## 依赖关系
- 基于前面所有模块的样式基础
- 与组件系统深度集成
- 影响所有动态交互的实现