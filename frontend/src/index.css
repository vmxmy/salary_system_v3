/* TailwindCSS 4 + DaisyUI 5 正确配置 */
@import "tailwindcss";
@plugin "daisyui" {
  themes: light, dark, cupcake, bumblebee, emerald, corporate, synthwave, retro, cyberpunk, valentine, halloween, garden, forest, aqua, lofi, pastel, fantasy, wireframe, black, luxury, dracula, cmyk, autumn, business, acid, lemonade, night, coffee, winter, dim, nord, sunset;
}

/* UI 紧凑化全局样式 */
@layer components {
  /* 紧凑化按钮 */
  .btn-compact {
    @apply min-h-8 h-8 px-2 text-sm;
  }
  
  /* 紧凑化卡片 */
  .card-compact {
    @apply p-3;
  }
  
  .card-compact .card-body {
    @apply p-3;
  }
  
  /* 紧凑化统计卡片 */
  .stat-compact {
    @apply p-3;
  }
  
  .stat-compact .stat-value {
    @apply text-xl;
  }
  
  .stat-compact .stat-title {
    @apply text-xs;
  }
  
  .stat-compact .stat-desc {
    @apply text-xs;
  }
  
  /* 紧凑化表格 */
  .table-compact {
    @apply table-sm;
  }
  
  .table-compact th {
    @apply px-2 py-1 text-xs font-medium;
  }
  
  .table-compact td {
    @apply px-2 py-1 text-sm;
  }
  
  /* 紧凑化导航栏 */
  .navbar-compact {
    @apply min-h-12 h-12;
  }
  
  /* 紧凑化侧边栏 */
  .sidebar-compact {
    @apply w-52;
  }
  
  .sidebar-compact .menu li > * {
    @apply px-2 py-1.5 text-sm;
  }
  
  /* 紧凑化工具栏 */
  .toolbar-compact {
    @apply p-2 gap-2;
  }
  
  /* 紧凑化搜索框 */
  .search-compact {
    @apply h-8 text-sm;
  }
  
  /* 紧凑化分页 */
  .pagination-compact .btn {
    @apply min-h-6 h-6 px-1.5 text-xs;
  }
  
  /* 紧凑化模态框 */
  .modal-compact .modal-box {
    @apply p-4;
  }

  /* 增强的模态框动画 */
  .modal-enhanced {
    @apply transition-all duration-300 ease-out;
  }

  .modal-enhanced .modal-box {
    @apply transform transition-all duration-300 ease-out;
    animation: modal-slide-in 0.3s ease-out;
  }

  @keyframes modal-slide-in {
    from {
      opacity: 0;
      transform: translateY(-20px) scale(0.95);
    }
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  @keyframes modal-slide-out {
    from {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
    to {
      opacity: 0;
      transform: translateY(-20px) scale(0.95);
    }
  }

  .modal-enhanced.modal-closing .modal-box {
    animation: modal-slide-out 0.2s ease-in;
  }

  /* 增强的背景模糊效果 */
  .modal-backdrop-enhanced {
    @apply backdrop-blur-sm bg-black/30;
    transition: all 0.3s ease-out;
  }

  /* 模态框头部增强样式 */
  .modal-header-enhanced {
    @apply relative overflow-hidden;
  }

  .modal-header-enhanced::before {
    content: '';
    @apply absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent;
    transform: translateX(-100%);
    transition: transform 0.6s ease-out;
  }

  .modal-header-enhanced:hover::before {
    transform: translateX(100%);
  }

  /* 模态框内容区域优化滚动 */
  .modal-content-enhanced {
    @apply overflow-y-auto;
  }

  .modal-content-enhanced::-webkit-scrollbar {
    width: 6px;
  }

  .modal-content-enhanced::-webkit-scrollbar-track {
    background: transparent;
  }

  .modal-content-enhanced::-webkit-scrollbar-thumb {
    @apply bg-base-300 rounded-full;
  }

  .modal-content-enhanced::-webkit-scrollbar-thumb:hover {
    @apply bg-base-content/30;
  }
  
  /* 紧凑化表单控件 */
  .form-compact .form-control {
    @apply gap-1;
  }
  
  .form-compact .label {
    @apply pb-1;
  }
  
  .form-compact .input {
    @apply h-8 text-sm;
  }
  
  .form-compact .select {
    @apply h-8 text-sm;
  }
  
  /* 紧凑化徽章 */
  .badge-compact {
    @apply px-1.5 py-0.5 text-xs;
  }
  
  /* 全局徽章样式 - 防止文字换行 */
  .badge {
    @apply whitespace-nowrap;
  }
  
  /* 紧凑化页面容器 */
  .page-compact {
    @apply p-4 lg:p-6 xl:p-8 space-y-4 mx-auto;
    /* 响应式宽度约束 - 优化大屏幕阅读体验 */
    max-width: 100%;
    width: 100%;
  }
  
  /* 在不同屏幕尺寸下设置合理的页边距 */
  @media (min-width: 768px) {
    .page-compact {
      @apply px-6 py-4;
      max-width: calc(100% - 4rem); /* 两侧各2rem边距 */
    }
  }
  
  @media (min-width: 1024px) {
    .page-compact {
      @apply px-8 py-6;
      max-width: calc(100% - 8rem); /* 两侧各4rem边距 */
    }
  }
  
  @media (min-width: 1280px) {
    .page-compact {
      @apply px-12 py-6;
      max-width: calc(100% - 12rem); /* 两侧各6rem边距 */
    }
  }
  
  @media (min-width: 1536px) {
    .page-compact {
      @apply px-16 py-8;
      max-width: calc(100% - 16rem); /* 两侧各8rem边距 */
    }
  }
  
  /* 卡片容器约束 - 防止在超宽屏幕上过度拉伸 */
  .page-compact .card,
  .page-compact .stats {
    @apply w-full;
    max-width: 100%; /* 确保卡片不超出父容器 */
  }
  
  /* 统计页面专用布局 - 优化MacBook等中大屏幕的数据展示宽度 */
  .page-statistics {
    @apply p-4 lg:p-6 xl:p-8 space-y-6 mx-auto;
    /* 统计页面充分利用可用宽度 - 针对MacBook等大屏幕优化 */
    max-width: 100%;
    width: 100%;
    /* 移除多余的外边距，让内容更宽 */
    margin-left: auto;
    margin-right: auto;
  }
  
  /* 统计页面响应式边距 - 极致优化MacBook屏幕显示效果 */
  @media (min-width: 768px) {
    .page-statistics {
      @apply px-4 py-6;
      max-width: calc(100% - 2rem); /* 最小边距：两侧各1rem */
    }
  }
  
  @media (min-width: 1024px) {
    .page-statistics {
      @apply px-6 py-8;
      max-width: calc(100% - 3rem); /* MacBook极致优化：两侧各1.5rem边距 */
    }
  }
  
  @media (min-width: 1280px) {
    .page-statistics {
      @apply px-8 py-8;
      max-width: calc(100% - 4rem); /* 大屏幕：两侧各2rem边距 */
    }
  }
  
  @media (min-width: 1440px) {
    .page-statistics {
      @apply px-10 py-8;
      max-width: calc(100% - 5rem); /* 1440px+屏幕：两侧各2.5rem边距 */
    }
  }
  
  @media (min-width: 1536px) {
    .page-statistics {
      @apply px-12 py-10;
      max-width: calc(100% - 6rem); /* 超大屏幕：两侧各3rem边距 */
    }
  }
  
  /* 统计页面图表容器优化 */
  .page-statistics .card {
    @apply shadow-sm border border-base-200;
  }
  
  .page-statistics .stats {
    @apply shadow-sm border border-base-200;
  }

  /* 统计模块内容宽度优化 - 配合page-statistics实现最佳显示效果 */
  .statistics-wide-content {
    max-width: 100%;
    margin: 0 auto;
    width: 100%;
  }

  /* 在page-statistics布局下，内容区域使用100%宽度充分利用可用空间 */
  @media (min-width: 1024px) {
    .page-statistics .statistics-wide-content {
      max-width: 100%; /* MacBook优化：充分利用可用宽度 */
      margin: 0; /* 移除任何默认边距 */
    }
  }

  @media (min-width: 1280px) {
    .page-statistics .statistics-wide-content {
      max-width: 100%; /* 大屏幕：充分利用page-statistics的可用宽度 */
      margin: 0;
    }
  }

  @media (min-width: 1440px) {
    .page-statistics .statistics-wide-content {
      max-width: 100%; /* 1440px MacBook：充分利用可用宽度 */
      margin: 0;
    }
  }

  @media (min-width: 1536px) {
    .page-statistics .statistics-wide-content {
      max-width: 98%; /* 超大屏幕：轻微限制防止过度拉伸 */
      margin: 0 auto;
    }
  }

  /* 统计页面专用增强样式 */
  .statistics-enhanced {
    @apply space-y-8;
  }

  /* 统计卡片网格布局优化 */
  .statistics-grid {
    @apply grid gap-6;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  }

  @media (min-width: 768px) {
    .statistics-grid {
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    }
  }

  @media (min-width: 1024px) {
    .statistics-grid {
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    }
  }

  /* KPI指标卡片增强样式 */
  .statistics-kpi-card {
    @apply bg-gradient-to-br from-base-100 to-base-200/50;
    @apply border border-base-300/50 shadow-lg hover:shadow-xl;
    @apply transition-all duration-300 ease-out;
    @apply relative overflow-hidden;
  }

  .statistics-kpi-card::before {
    content: '';
    @apply absolute top-0 left-0 w-full h-1;
    background: linear-gradient(90deg, 
      hsl(var(--p)) 0%, 
      hsl(var(--s)) 50%, 
      hsl(var(--a)) 100%);
  }

  .statistics-kpi-card:hover {
    @apply scale-[1.02] shadow-2xl;
    @apply border-primary/30;
  }

  /* 统计数值渐变效果 */
  .stat-value-gradient {
    background: linear-gradient(135deg, 
      hsl(var(--p)) 0%, 
      hsl(var(--s)) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    @apply font-black text-transparent;
  }

  /* 趋势指标动画 */
  .trend-indicator {
    @apply inline-flex items-center gap-1 transition-all duration-300;
  }

  .trend-up {
    @apply text-success;
    animation: trend-pulse-green 2s infinite;
  }

  .trend-down {
    @apply text-error;
    animation: trend-pulse-red 2s infinite;
  }

  .trend-stable {
    @apply text-info;
  }

  @keyframes trend-pulse-green {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; transform: scale(1.05); }
  }

  @keyframes trend-pulse-red {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; transform: scale(1.05); }
  }

  /* 统计页面加载状态增强 */
  .statistics-loading {
    @apply min-h-[60vh] flex items-center justify-center;
    @apply bg-gradient-to-br from-base-100 to-base-200/50;
  }

  .statistics-loading-spinner {
    @apply relative;
  }

  .statistics-loading-spinner::before {
    content: '';
    @apply absolute inset-0 rounded-full border-4 border-primary/20;
    animation: loading-pulse 2s ease-in-out infinite;
  }

  @keyframes loading-pulse {
    0%, 100% {
      transform: scale(1);
      opacity: 1;
    }
    50% {
      transform: scale(1.1);
      opacity: 0.7;
    }
  }

  /* 统计卡片入场动画 */
  .statistics-fade-in {
    animation: statistics-fade-in 0.6s ease-out forwards;
  }

  @keyframes statistics-fade-in {
    from {
      opacity: 0;
      transform: translateY(20px) scale(0.95);
    }
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  /* 统计卡片悬停放大效果 */
  .statistics-hover-lift {
    @apply transition-all duration-300 ease-out;
  }

  .statistics-hover-lift:hover {
    @apply -translate-y-1 shadow-xl;
  }

  /* Alert组件增强样式 */
  .alert-enhanced {
    @apply relative overflow-hidden;
  }

  .alert-enhanced::before {
    content: '';
    @apply absolute left-0 top-0 bottom-0 w-1;
  }

  .alert-error.alert-enhanced::before {
    @apply bg-error;
  }

  .alert-warning.alert-enhanced::before {
    @apply bg-warning;
  }

  .alert-info.alert-enhanced::before {
    @apply bg-info;
  }

  .alert-success.alert-enhanced::before {
    @apply bg-success;
  }

  /* 数字计数动画 */
  @keyframes count-up {
    from { 
      opacity: 0.5;
      transform: translateY(10px);
    }
    to { 
      opacity: 1;
      transform: translateY(0);
    }
  }

  .stat-value.animate-count {
    animation: count-up 0.8s ease-out;
  }

  /* 统计图表容器优化 */
  .statistics-chart-container {
    @apply relative overflow-hidden rounded-xl;
    @apply bg-gradient-to-br from-base-100 via-base-100 to-base-200/30;
    @apply border border-base-300/50 shadow-lg;
  }

  .statistics-chart-container::before {
    content: '';
    @apply absolute top-0 left-0 right-0 h-px;
    background: linear-gradient(90deg, transparent, hsl(var(--p))/20, transparent);
  }

  /* 解决stats容器滚动问题 - 确保充足的显示空间 */
  .statistics-stats-container {
    @apply w-full;
    overflow-x: auto; /* 允许水平滚动作为后备 */
    overflow-y: visible;
  }

  /* 统计页面的stats组件优化 */
  .statistics-page .stats {
    @apply w-full;
    min-width: max-content; /* 确保内容完全显示 */
  }

  /* ==========================================
   * 统一的Card边框样式系统 - 主题色版本
   * 所有card使用primary主题色边框，确保一致的视觉体验
   * ========================================== */
  
  /* DaisyUI v5 统一主题色边框 - 基于primary色的层次化边框系统 */
  .card-unified-border {
    @apply border border-primary/8;
    transition: border-color 0.2s ease-out;
  }
  
  .card-unified-border-standard {
    @apply border border-primary/15;
    transition: border-color 0.2s ease-out;
  }
  
  .card-unified-border-emphasized {
    @apply border border-primary/25;
    transition: border-color 0.2s ease-out;
  }
  
  /* 主题适配的primary边框颜色 - 使用CSS变量确保主题响应性 */
  .card-theme-border {
    border-color: hsl(var(--p) / 0.08);
    transition: border-color 0.2s ease-out;
  }
  
  .card-theme-border-standard {
    border-color: hsl(var(--p) / 0.15);
    transition: border-color 0.2s ease-out;
  }
  
  .card-theme-border-emphasized {
    border-color: hsl(var(--p) / 0.25);
    transition: border-color 0.2s ease-out;
  }
  
  /* 交互状态增强 - hover时primary色加深 */
  .card-unified-border:hover {
    @apply border-primary/15;
  }
  
  .card-unified-border-standard:hover {
    @apply border-primary/25;
  }
  
  .card-unified-border-emphasized:hover {
    @apply border-primary/35;
  }
  
  /* 确保card在深色主题下primary边框的可见性 */
  [data-theme*="dark"] .card-unified-border,
  [data-theme*="night"] .card-unified-border,
  [data-theme*="coffee"] .card-unified-border,
  [data-theme*="halloween"] .card-unified-border {
    @apply border border-primary/12;
  }
  
  [data-theme*="dark"] .card-unified-border-standard,
  [data-theme*="night"] .card-unified-border-standard,
  [data-theme*="coffee"] .card-unified-border-standard,
  [data-theme*="halloween"] .card-unified-border-standard {
    @apply border border-primary/20;
  }
  
  [data-theme*="dark"] .card-unified-border-emphasized,
  [data-theme*="night"] .card-unified-border-emphasized,
  [data-theme*="coffee"] .card-unified-border-emphasized,
  [data-theme*="halloween"] .card-unified-border-emphasized {
    @apply border border-primary/30;
  }
  
  /* 高对比度模式下的primary边框增强 */
  @media (prefers-contrast: high) {
    .card-unified-border {
      @apply border-2 border-primary/25;
    }
    
    .card-unified-border-standard {
      @apply border-2 border-primary/35;
    }
    
    .card-unified-border-emphasized {
      @apply border-2 border-primary/45;
    }
  }
  
  /* 特殊主题的primary色适配 - 确保在所有32+主题下都美观 */
  [data-theme="valentine"] .card-unified-border,
  [data-theme="pastel"] .card-unified-border,
  [data-theme="fantasy"] .card-unified-border {
    @apply border-primary/10; /* 柔和主题稍微减淡 */
  }
  
  [data-theme="cyberpunk"] .card-unified-border,
  [data-theme="synthwave"] .card-unified-border,
  [data-theme="luxury"] .card-unified-border {
    @apply border-primary/15; /* 高对比主题保持标准 */
  }
  
  /* 渐变边框效果支持 - 用于特殊场景 */
  .card-gradient-border {
    position: relative;
    background: linear-gradient(135deg, 
      hsl(var(--p) / 0.1) 0%,
      hsl(var(--p) / 0.05) 50%,
      hsl(var(--p) / 0.1) 100%);
    border: 1px solid transparent;
    background-clip: padding-box;
  }
  
  .card-gradient-border::before {
    content: '';
    position: absolute;
    inset: 0;
    padding: 1px;
    background: linear-gradient(135deg,
      hsl(var(--p) / 0.2),
      hsl(var(--p) / 0.1),
      hsl(var(--p) / 0.2));
    border-radius: inherit;
    mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    mask-composite: xor;
    -webkit-mask-composite: xor;
  }

  /* 防止stats在小屏幕上过度压缩 */
  .statistics-kpi-card.stats {
    @apply w-full;
    min-width: 0; /* 重置最小宽度以配合Grid */
  }

  .statistics-kpi-card .stat {
    @apply min-w-0; /* 允许stat项目压缩 */
    flex: 1 1 0; /* 等宽分布 */
  }

  /* 响应式stats处理 */
  @media (max-width: 1024px) {
    .statistics-kpi-card.stats {
      @apply stats-vertical; /* 移动端垂直排列 */
    }
  }

  @media (max-width: 768px) {
    .statistics-stats-container {
      overflow-x: auto;
      -webkit-overflow-scrolling: touch; /* 平滑滚动 */
    }
    
    .statistics-kpi-card .stat {
      min-width: 200px; /* 移动端最小宽度 */
    }
  }
  
  /* 紧凑化数据表格特殊样式 */
  .data-table-compact {
    @apply text-sm;
  }
  
  .data-table-compact .table-header {
    @apply py-1 px-2;
  }
  
  .data-table-compact .table-cell {
    @apply py-1.5 px-2;
  }
  
  /* 优化的表格样式 */
  .table thead {
    @apply sticky top-0 z-10;
  }
  
  .table-zebra tbody tr:nth-child(even) {
    @apply bg-base-200/20;
  }
  
  .table-zebra tbody tr:nth-child(odd) {
    @apply bg-transparent;
  }
  
  /* 表格排序图标样式 */
  .table th .sort-icon {
    @apply opacity-50 transition-opacity;
  }
  
  .table th:hover .sort-icon {
    @apply opacity-100;
  }
  
  /* 表格选中行样式 */
  .table tbody tr[data-state="selected"] {
    @apply !bg-primary/10;
  }
  
  .table tbody tr[data-state="selected"]:hover {
    @apply !bg-primary/15;
  }

  /* 紧凑化手风琴样式 */
  .compact-accordion {
    @apply shadow-sm hover:shadow-md transition-shadow duration-200;
  }

  .compact-accordion .collapse-title {
    @apply min-h-[3rem] py-2 px-4 text-base;
  }

  .compact-accordion .collapse-content {
    @apply px-4 pb-4;
  }

  .compact-accordion .collapse-content > div {
    @apply pt-2;
  }

  /* 紧凑化详情字段样式 */
  .form-compact .form-control {
    @apply gap-1.5;
  }

  .form-compact .label {
    @apply pb-0.5;
  }

  .form-compact .label-text {
    @apply text-sm font-medium;
  }

  .form-compact .input,
  .form-compact .select,
  .form-compact .textarea {
    @apply text-sm;
  }

  .form-compact .input {
    @apply h-9;
  }

  .form-compact .select {
    @apply h-9 min-h-[2.25rem];
  }
  
  /* DaisyUI 5 Tab组件增强样式 */
  .tabs {
    /* 确保tab容器占满宽度 */
    @apply flex-wrap gap-0 relative;
  }

  /* 完全等宽Tab解决方案 - 最现代化CSS Grid方案 */
  .tabs-equal-width {
    @apply grid w-full relative;
    /* 强制等宽：每个tab占用完全相同的空间 */
    grid-template-columns: repeat(var(--tabs-count, 5), 1fr);
    grid-auto-flow: column;
    gap: 0;
  }

  .tabs-equal-width .tab {
    @apply justify-self-stretch justify-center items-center;
    min-width: 0; /* 防止内容溢出 */
    max-width: none; /* 移除最大宽度限制 */
    width: 100%; /* 占满grid单元格 */
    text-align: center; /* 文字居中 */
    white-space: nowrap; /* 防止文字换行 */
    overflow: hidden; /* 隐藏溢出内容 */
    text-overflow: ellipsis; /* 长文本显示省略号 */
  }

  /* 高级等宽方案 - 使用minmax确保完美等宽 */
  .tabs-perfect-equal {
    @apply grid w-full relative;
    /* minmax(0, 1fr) 确保即使内容差异很大也保持等宽 */
    grid-template-columns: repeat(var(--tabs-count, 5), minmax(0, 1fr));
    grid-auto-flow: column;
    gap: 0;
  }

  .tabs-perfect-equal .tab {
    @apply justify-self-stretch justify-center items-center;
    min-width: 0;
    width: 100%;
    text-align: center;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  /* 等宽Tab解决方案 - Flexbox方案（兼容性更好）*/
  .tabs-flex-equal {
    @apply flex w-full relative;
  }

  .tabs-flex-equal .tab {
    @apply flex-1 justify-center items-center;
    flex-basis: 0; /* 强制等宽，忽略内容差异 */
    min-width: 0; /* 防止内容溢出 */
    width: calc(100% / var(--tabs-count, 5));
  }

  /* 固定最小宽度方案 - 适用于内容差异较大的情况 */
  .tabs-fixed-min {
    @apply flex w-full relative justify-between;
  }

  .tabs-fixed-min .tab {
    @apply flex-1 justify-center items-center;
    min-width: 120px; /* 最小宽度保证 */
    max-width: 200px; /* 最大宽度限制 */
  }
  
  .tab {
    /* 统一tab的基本样式 */
    @apply transition-all duration-300 ease-out;
    @apply flex-1 text-center justify-center relative;
    @apply hover:bg-base-200/30 hover:text-base-content/80;
    min-width: fit-content;
    position: relative;
    overflow: hidden;
  }
  
  /* Tab悬停微动效果 */
  .tab:hover:not(.tab-disabled) {
    @apply transform scale-[1.02] bg-base-200/40;
  }

  /* Tab图标动画 */
  .tab svg {
    @apply transition-transform duration-300 ease-out;
  }

  .tab:hover svg {
    @apply transform scale-110;
  }
  
  .tab-active {
    /* 活跃状态的增强样式 */
    @apply text-primary font-bold bg-base-100;
    @apply relative z-10;
  }

  .tab-active svg {
    @apply text-primary drop-shadow-sm;
  }
  
  .tab-disabled {
    /* 禁用状态的样式 */
    @apply cursor-not-allowed text-base-content/20 bg-base-100/50;
  }

  .tab-disabled:hover {
    @apply transform-none scale-100;
  }
  
  /* Tab lift 变体的特定样式优化 */
  .tabs-lift {
    @apply bg-base-200/30 rounded-xl p-1;
    backdrop-filter: blur(10px);
  }

  .tabs-lift .tab {
    @apply border-b-0 rounded-lg mx-1;
    @apply relative overflow-hidden;
  }
  
  .tabs-lift .tab-active {
    @apply border-b-0 bg-base-100 shadow-lg;
    box-shadow: 
      0 4px 12px rgba(0,0,0,0.1),
      0 2px 4px rgba(0,0,0,0.06),
      inset 0 1px 0 rgba(255,255,255,0.1);
  }

  /* 活跃Tab的光晕效果 */
  .tabs-lift .tab-active::before {
    content: '';
    @apply absolute inset-0 bg-gradient-to-r from-transparent via-primary/5 to-transparent;
    @apply opacity-0 transition-opacity duration-500;
  }

  .tabs-lift .tab-active:hover::before {
    @apply opacity-100;
  }
  
  /* Tab大尺寸的间距调整 */
  .tabs-lg .tab {
    @apply px-6 py-4 text-base font-medium;
  }

  /* Tab过渡指示器 */
  .tabs-indicator {
    @apply absolute bottom-0 left-0 h-1 bg-primary rounded-full;
    @apply transition-all duration-500 ease-out;
    transform: translateX(var(--indicator-x, 0)) scaleX(var(--indicator-scale, 0.2));
  }
  
  /* 响应式等宽tab布局优化 */
  @media (max-width: 768px) {
    /* 移动端：保持Grid等宽或改为垂直堆叠 */
    .tabs-equal-width {
      /* 选项1：保持水平等宽布局 */
      grid-template-columns: repeat(var(--tabs-count, 5), 1fr);
      /* 选项2：如果需要垂直堆叠，取消注释下面的代码 */
      /* display: flex;
      flex-direction: column;
      grid-template-columns: none; */
    }

    .tabs-equal-width .tab {
      /* 保持等宽 - 压缩内容显示 */
      @apply text-sm px-2 py-2;
      min-width: 0;
      font-size: 0.875rem; /* 14px */
    }

    /* 高级等宽方案的移动端适配 */
    .tabs-perfect-equal {
      grid-template-columns: repeat(var(--tabs-count, 5), minmax(0, 1fr));
    }

    .tabs-perfect-equal .tab {
      @apply text-sm px-2 py-2;
      min-width: 0;
    }

    /* 移动端：Flexbox方案改为垂直堆叠 */
    .tabs-flex-equal {
      @apply flex-col;
    }

    .tabs-flex-equal .tab {
      @apply w-full mb-2;
      min-width: 100%;
      flex-basis: auto;
    }

    /* 原有样式保持 */
    .tabs-lift {
      @apply flex-col p-2 gap-1;
    }

    .tabs-lift .tab {
      @apply px-4 py-3 text-sm mx-0 mb-1;
      min-width: 100%;
    }
    
    .tabs-lg .tab {
      @apply px-4 py-3 text-sm;
    }
  }

  @media (max-width: 640px) {
    .tabs-lift .tab {
      @apply px-3 py-2 text-xs;
    }

    /* 超小屏幕：进一步紧凑化 */
    .tabs-equal-width .tab,
    .tabs-flex-equal .tab {
      @apply px-3 py-2 text-sm;
    }
  }

  /* 响应式Grid参数配置 */
  @media (min-width: 1536px) {
    .statistics-tabs-equal {
      --tab-min-width: 160px; /* 超大屏幕：更宽的tab */
      --tab-max-width: 240px;
    }
    
    .tabs-equal-width,
    .tabs-flex-equal {
      max-width: 1200px;
      margin: 0 auto;
    }
  }

  @media (min-width: 1280px) and (max-width: 1535px) {
    .statistics-tabs-equal {
      --tab-min-width: 150px; /* 大屏幕：标准宽度 */
      --tab-max-width: 220px;
    }
  }

  @media (min-width: 1024px) and (max-width: 1279px) {
    .statistics-tabs-equal {
      --tab-min-width: 130px; /* 中等屏幕：适中宽度 */
      --tab-max-width: 180px;
    }
  }

  @media (min-width: 768px) and (max-width: 1023px) {
    .statistics-tabs-equal {
      --tab-min-width: 120px; /* 平板：紧凑宽度 */
      --tab-max-width: 160px;
      --tab-gap: 2px;
    }
  }

  @media (max-width: 767px) {
    .statistics-tabs-equal {
      --tab-min-width: 100px; /* 移动端：最小可用宽度 */
      --tab-max-width: 140px;
      --tab-gap: 2px;
      
      /* 移动端考虑垂直布局 */
      grid-template-columns: repeat(var(--tabs-count, 5), 1fr);
    }

    .statistics-tabs-equal .tab {
      @apply px-2 py-2 text-xs;
      gap: 0.25rem;
    }

    .statistics-tabs-equal .tab svg {
      width: 0.875rem;
      height: 0.875rem;
    }
  }
  
  /* Tab内容区域的焦点指示器和过渡效果 */
  [role="tabpanel"] {
    @apply transition-all duration-500 ease-out;
    animation: tabpanel-fade-in 0.4s ease-out;
  }

  [role="tabpanel"]:focus {
    @apply outline-2 outline-primary outline-offset-4 rounded-lg;
  }

  @keyframes tabpanel-fade-in {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* 统计Tab专用增强效果 - 完全等宽版本 */
  .statistics-tabs {
    @apply mb-8;
  }

  .statistics-tabs.tabs-equal-width .tab,
  .statistics-tabs.tabs-perfect-equal .tab {
    @apply border border-transparent hover:border-base-300;
    @apply backdrop-blur-sm transition-all duration-300;
    /* 确保等宽显示 */
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
  }

  .statistics-tabs.tabs-equal-width .tab-active,
  .statistics-tabs.tabs-perfect-equal .tab-active {
    @apply border-primary/20 bg-primary/5;
    box-shadow: 
      0 2px 8px rgba(0,0,0,0.06),
      inset 0 1px 0 rgba(255,255,255,0.1);
  }

  /* 统计专用：等宽且合理宽度的tab样式类 */
  .statistics-tabs-equal {
    @apply grid w-full relative mb-8 bg-base-200/30 rounded-xl p-1;
    /* 配置可调节的Grid参数 */
    --tab-min-width: 140px; /* 最小宽度 */
    --tab-max-width: 200px; /* 最大宽度 */
    --tab-gap: 4px; /* tab间距 */
    
    grid-template-columns: repeat(var(--tabs-count, 5), minmax(var(--tab-min-width), 1fr));
    gap: var(--tab-gap);
    backdrop-filter: blur(10px);
  }

  .statistics-tabs-equal .tab {
    @apply rounded-lg mx-0 px-4 py-3 text-sm font-medium;
    @apply transition-all duration-300 ease-out;
    @apply border border-transparent hover:border-base-300;
    @apply backdrop-blur-sm;
    
    /* 等宽且合理宽度的关键样式 */
    min-width: var(--tab-min-width);
    max-width: var(--tab-max-width);
    width: 100%;
    
    /* 内容居中和截断处理 */
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    gap: 0.375rem; /* 图标和文字间距 */
    
    /* 盒模型 */
    box-sizing: border-box;
  }

  /* 确保tab内的SVG图标不影响布局 */
  .statistics-tabs-equal .tab svg {
    @apply shrink-0;
    width: 1rem;
    height: 1rem;
  }

  /* 确保tab内的文字不换行 */
  .statistics-tabs-equal .tab span {
    @apply truncate max-w-none;
  }

  .statistics-tabs-equal .tab-active {
    @apply bg-base-100 shadow-lg;
    @apply border-primary/20 bg-primary/5;
    box-shadow: 
      0 4px 12px rgba(0,0,0,0.1),
      0 2px 4px rgba(0,0,0,0.06),
      inset 0 1px 0 rgba(255,255,255,0.1);
  }
}

/* 强制应用宋体字体到整个页面 - TailwindCSS 4 需要显式声明 */
@layer base {
  html {
    font-family: "Songti SC", "SimSun", "Times New Roman", serif;
  }
  
  body {
    font-family: inherit;
  }
  
  /* 确保所有元素都继承宋体 */
  * {
    font-family: inherit;
  }
  
  /* 如果需要无衬线字体的地方，可以使用这个类 */
  .sans-font {
    font-family: "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "WenQuanYi Micro Hei", -apple-system, BlinkMacSystemFont, sans-serif;
  }
  
  /* 测试衬线字体 - 直接应用到页面 */
  .test-serif {
    font-family: "Songti SC", "SimSun", "Times New Roman", serif;
  }
}

/* ==========================================
 * 新用户指导系统样式
 * ========================================== */

/* 高亮目标元素的样式 */
.onboarding-highlight {
  position: relative !important;
  z-index: 45 !important;
  box-shadow: 0 0 0 4px hsl(var(--p) / 0.3),
              0 0 20px hsl(var(--p) / 0.2),
              0 0 40px hsl(var(--p) / 0.1) !important;
  border-radius: 0.5rem !important;
  transition: all 0.3s ease-out !important;
}

.onboarding-highlight::before {
  content: '';
  position: absolute;
  inset: -4px;
  border: 2px solid hsl(var(--p));
  border-radius: 0.625rem;
  pointer-events: none;
  animation: onboarding-pulse 2s ease-in-out infinite;
}

@keyframes onboarding-pulse {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.7;
    transform: scale(1.02);
  }
}

/* 工具提示动画 */
.onboarding-tooltip {
  animation: onboarding-tooltip-enter 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.onboarding-tooltip-hidden {
  opacity: 0;
  transform: scale(0.95) translateY(10px);
}

.onboarding-tooltip-visible {
  opacity: 1;
  transform: scale(1) translateY(0);
}

@keyframes onboarding-tooltip-enter {
  from {
    opacity: 0;
    transform: scale(0.9) translateY(20px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

/* 遮罩层动画 */
.onboarding-overlay {
  animation: onboarding-overlay-enter 0.3s ease-out forwards;
}

@keyframes onboarding-overlay-enter {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* 箭头样式 */
.onboarding-arrow {
  width: 12px;
  height: 12px;
  background: hsl(var(--b1));
  border: 1px solid hsl(var(--b3) / 0.5);
  transform: rotate(45deg);
}

.onboarding-arrow-top {
  top: -6px;
  left: 50%;
  margin-left: -6px;
  border-bottom: none;
  border-right: none;
}

.onboarding-arrow-bottom {
  bottom: -6px;
  left: 50%;
  margin-left: -6px;
  border-top: none;
  border-left: none;
}

.onboarding-arrow-left {
  left: -6px;
  top: 50%;
  margin-top: -6px;
  border-right: none;
  border-bottom: none;
}

.onboarding-arrow-right {
  right: -6px;
  top: 50%;
  margin-top: -6px;
  border-left: none;
  border-top: none;
}

/* 指导进度条增强样式 */
.onboarding-progress {
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

.onboarding-progress .progress-step {
  transition: all 0.3s ease-out;
}

.onboarding-progress .progress-step-active {
  transform: scale(1.1);
  box-shadow: 0 0 0 3px hsl(var(--p) / 0.2);
}

.onboarding-progress .progress-step-completed {
  background: hsl(var(--su));
  border-color: hsl(var(--su));
}

/* 指导启动器样式 */
.onboarding-launcher .flow-card {
  @apply transition-all duration-300 ease-out;
  @apply hover:shadow-lg hover:-translate-y-1;
}

.onboarding-launcher .flow-card-active {
  @apply ring-2 ring-primary/30 shadow-xl;
  animation: flow-card-pulse 2s ease-in-out infinite;
}

@keyframes flow-card-pulse {
  0%, 100% {
    box-shadow: 0 0 0 0 hsl(var(--p) / 0.3);
  }
  50% {
    box-shadow: 0 0 0 8px hsl(var(--p) / 0);
  }
}

/* 禁用滚动以防止布局变化 */
body.onboarding-active {
  overflow: hidden;
}

/* 响应式调整 */
@media (max-width: 768px) {
  .onboarding-tooltip {
    max-width: calc(100vw - 2rem) !important;
    margin: 0 1rem !important;
  }
  
  .onboarding-highlight {
    box-shadow: 0 0 0 2px hsl(var(--p) / 0.4),
                0 0 10px hsl(var(--p) / 0.2) !important;
  }

  .onboarding-progress {
    max-width: calc(100vw - 2rem) !important;
    margin: 0 1rem !important;
  }

  /* 移动端工具提示调整 */
  .onboarding-tooltip .btn-sm {
    @apply text-xs px-3 py-1;
  }

  .onboarding-arrow {
    width: 8px;
    height: 8px;
  }

  .onboarding-arrow-top,
  .onboarding-arrow-bottom {
    margin-left: -4px;
  }

  .onboarding-arrow-top {
    top: -4px;
  }

  .onboarding-arrow-bottom {
    bottom: -4px;
  }

  .onboarding-arrow-left,
  .onboarding-arrow-right {
    margin-top: -4px;
  }

  .onboarding-arrow-left {
    left: -4px;
  }

  .onboarding-arrow-right {
    right: -4px;
  }
}

@media (max-width: 640px) {
  .onboarding-launcher .flow-card {
    @apply p-3;
  }

  .onboarding-launcher .btn-sm {
    @apply px-2 py-1 text-xs;
  }

  .onboarding-progress {
    padding: 0.75rem;
  }
}

/* 无障碍访问增强 */
@media (prefers-reduced-motion: reduce) {
  .onboarding-highlight::before,
  .onboarding-tooltip,
  .onboarding-overlay,
  .flow-card-pulse {
    animation: none !important;
  }
  
  .onboarding-highlight {
    transition: none !important;
  }

  .onboarding-progress .progress-step {
    transition: none !important;
  }
}

/* 高对比度模式支持 */
@media (prefers-contrast: high) {
  .onboarding-highlight {
    border: 3px solid hsl(var(--p)) !important;
    box-shadow: 0 0 0 1px hsl(var(--bc)) !important;
  }

  .onboarding-tooltip {
    border: 2px solid hsl(var(--bc));
  }

  .onboarding-arrow {
    border-width: 2px;
    border-color: hsl(var(--bc));
  }
}

/* 暗色主题优化 */
[data-theme*="dark"] .onboarding-tooltip,
[data-theme*="night"] .onboarding-tooltip,
[data-theme*="coffee"] .onboarding-tooltip {
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.8);
}

[data-theme*="dark"] .onboarding-highlight::before,
[data-theme*="night"] .onboarding-highlight::before,
[data-theme*="coffee"] .onboarding-highlight::before {
  border-color: hsl(var(--p));
  box-shadow: 0 0 10px hsl(var(--p) / 0.5);
}

/* 触摸设备优化 */
@media (pointer: coarse) {
  .onboarding-tooltip .btn {
    min-height: 44px;
    min-width: 44px;
  }

  .onboarding-launcher .flow-card {
    padding: 1.25rem;
  }

  .onboarding-progress .progress-step {
    min-width: 44px;
    min-height: 44px;
  }
}

/* 指导系统特定的动画缓解 */
.onboarding-fade-in {
  animation: onboarding-fade-in 0.6s ease-out forwards;
}

@keyframes onboarding-fade-in {
  from {
    opacity: 0;
    transform: translateY(20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.onboarding-slide-in-left {
  animation: onboarding-slide-in-left 0.5s ease-out forwards;
}

@keyframes onboarding-slide-in-left {
  from {
    opacity: 0;
    transform: translateX(-30px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.onboarding-slide-in-right {
  animation: onboarding-slide-in-right 0.5s ease-out forwards;
}

@keyframes onboarding-slide-in-right {
  from {
    opacity: 0;
    transform: translateX(30px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* 指导系统焦点管理 */
.onboarding-tooltip:focus-within {
  outline: 2px solid hsl(var(--p));
  outline-offset: 4px;
}

.onboarding-launcher .flow-card:focus-within {
  outline: 2px solid hsl(var(--p));
  outline-offset: 2px;
}

/* 指导系统印刷增强 */
.onboarding-tooltip h3 {
  @apply font-semibold leading-tight;
  font-feature-settings: 'kern' 1, 'liga' 1;
}

.onboarding-tooltip p {
  @apply leading-relaxed;
  font-feature-settings: 'kern' 1;
}